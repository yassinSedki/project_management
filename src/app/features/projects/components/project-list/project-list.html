<div class="flex items-center justify-between mb-6">
  <input
    [(ngModel)]="searchTerm"
    type="text"
    placeholder="Rechercher un projet"
    class="w-full md:w-1/2 px-4 py-2 rounded-xl border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white/70"
  />
</div>

<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
  @for (project of filteredProjects; track project.name) {
    <article class="group bg-white/70 backdrop-blur rounded-2xl shadow hover:shadow-2xl ring-1 ring-gray-200/60 transition-all duration-300 overflow-hidden">
      <div class="p-5">
        <div class="flex items-start justify-between gap-3 mb-3">
          <h2 class="text-xl font-bold text-gray-800 group-hover:text-indigo-700 transition-colors">{{ project.name }}</h2>
          <span
            class="inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold border"
            [ngClass]="{
              'bg-yellow-100 text-yellow-800 border-yellow-200': project.status === 'En cours',
              'bg-green-100 text-green-800 border-green-200': project.status === 'Terminé'
            }"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-4 w-4">
              <path *ngIf="project.status === 'Terminé'" d="M9 12l2 2 4-4M7 20h10a2 2 0 002-2V6a2 2 0 00-2-2H7a2 2 0 00-2 2v12a2 2 0 002 2z" />
              <path *ngIf="project.status === 'En cours'" d="M12 6v6l4 2M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10z" />
            </svg>
            {{ project.status }}
          </span>
        </div>
        <p class="text-gray-600 mb-4">{{ project.description }}</p>
        <div class="flex items-center justify-between">
          <button (click)="selectProject(project)" class="inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-semibold text-white bg-gradient-to-r from-blue-600 to-indigo-600 shadow hover:from-blue-700 hover:to-indigo-700 transition-all">
            Voir détails
          </button>
        </div>
        <div class="border-t border-gray-200/70 pt-4 mt-4">
          <app-task-list [tasks]="project.tasks"></app-task-list>
        </div>
      </div>
    </article>
  } @empty {
    <div class="col-span-full text-center text-gray-600 py-8">
      Aucun projet trouvé
    </div>
  }
</div>

<!-- Details panel -->
<div class="max-w-4xl mx-auto mt-10" *ngIf="selectedProject">
  <app-project-detail [project]="selectedProject"></app-project-detail>
</div>
